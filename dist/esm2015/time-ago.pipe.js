import { __decorate } from "tslib";
import { Pipe, PipeTransform, NgZone, ChangeDetectorRef, OnDestroy } from "@angular/core";
import { Translate } from './translate';
let TimeAgoPipe = class TimeAgoPipe {
    constructor(changeDetectorRef, ngZone) {
        this.changeDetectorRef = changeDetectorRef;
        this.ngZone = ngZone;
        this.translate = new Translate();
    }
    transform(value, locale) {
        this.removeTimer();
        let d = new Date(value);
        let now = new Date();
        let seconds = Math.round(Math.abs((now.getTime() - d.getTime()) / 1000));
        let timeToUpdate = this.getSecondsUntilUpdate(seconds) * 1000;
        this.timer = this.ngZone.runOutsideAngular(() => {
            if (typeof window !== 'undefined') {
                return window.setTimeout(() => {
                    this.ngZone.run(() => this.changeDetectorRef.markForCheck());
                }, timeToUpdate);
            }
            return null;
        });
        return this.getI18nMessage(seconds, locale || 'en');
    }
    getI18nMessage(seconds, locale) {
        let minutes = Math.round(Math.abs(seconds / 60));
        let hours = Math.round(Math.abs(minutes / 60));
        let days = Math.round(Math.abs(hours / 24));
        let months = Math.round(Math.abs(days / 30.416));
        let years = Math.round(Math.abs(days / 365));
        if (seconds <= 45) {
            return this.translate.translate(locale, 'a few seconds ago');
        }
        else if (seconds <= 90) {
            return this.translate.translate(locale, 'a minute ago');
        }
        else if (minutes <= 45) {
            return this.translate.translate(locale, 'minutes ago', { minutes });
        }
        else if (minutes <= 90) {
            return this.translate.translate(locale, 'an hour ago');
        }
        else if (hours <= 22) {
            return this.translate.translate(locale, 'hours ago', { hours });
        }
        else if (hours <= 36) {
            return this.translate.translate(locale, 'a day ago');
        }
        else if (days <= 25) {
            return this.translate.translate(locale, 'days ago', { days });
        }
        else if (days <= 45) {
            return this.translate.translate(locale, 'a month ago');
        }
        else if (days <= 345) {
            return this.translate.translate(locale, 'months ago', { months });
        }
        else if (days <= 545) {
            return this.translate.translate(locale, 'a year ago');
        }
        else { // (days > 545)
            return this.translate.translate(locale, 'years ago', { years });
        }
    }
    ngOnDestroy() {
        this.removeTimer();
    }
    removeTimer() {
        if (this.timer) {
            window.clearTimeout(this.timer);
            this.timer = null;
        }
    }
    getSecondsUntilUpdate(seconds) {
        let min = 60;
        let hr = min * 60;
        let day = hr * 24;
        if (seconds < min) { // less than 1 min, update ever 2 secs
            return 2;
        }
        else if (seconds < hr) { // less than an hour, update every 30 secs
            return 30;
        }
        else if (seconds < day) { // less then a day, update every 5 mins
            return 300;
        }
        else { // update every hour
            return 3600;
        }
    }
};
TimeAgoPipe.ctorParameters = () => [
    { type: ChangeDetectorRef },
    { type: NgZone }
];
TimeAgoPipe = __decorate([
    Pipe({
        name: 'timeAgo',
        pure: false
    })
], TimeAgoPipe);
export { TimeAgoPipe };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGltZS1hZ28ucGlwZS5qcyIsInNvdXJjZVJvb3QiOiJuZzovL3RpbWUtYWdvLXBpcGUvIiwic291cmNlcyI6WyJ0aW1lLWFnby5waXBlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSxPQUFPLEVBQUMsSUFBSSxFQUFFLGFBQWEsRUFBRSxNQUFNLEVBQUUsaUJBQWlCLEVBQUUsU0FBUyxFQUFDLE1BQU0sZUFBZSxDQUFDO0FBQ3hGLE9BQU8sRUFBQyxTQUFTLEVBQUMsTUFBTSxhQUFhLENBQUM7QUFNdEMsSUFBYSxXQUFXLEdBQXhCLE1BQWEsV0FBVztJQUl2QixZQUFvQixpQkFBb0MsRUFBVSxNQUFjO1FBQTVELHNCQUFpQixHQUFqQixpQkFBaUIsQ0FBbUI7UUFBVSxXQUFNLEdBQU4sTUFBTSxDQUFRO1FBRnhFLGNBQVMsR0FBYyxJQUFJLFNBQVMsRUFBRSxDQUFDO0lBRW9DLENBQUM7SUFDcEYsU0FBUyxDQUFDLEtBQVksRUFBRSxNQUFlO1FBQ3RDLElBQUksQ0FBQyxXQUFXLEVBQUUsQ0FBQztRQUNuQixJQUFJLENBQUMsR0FBRyxJQUFJLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUN4QixJQUFJLEdBQUcsR0FBRyxJQUFJLElBQUksRUFBRSxDQUFDO1FBQ3JCLElBQUksT0FBTyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxPQUFPLEVBQUUsR0FBRyxDQUFDLENBQUMsT0FBTyxFQUFFLENBQUMsR0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO1FBQ3ZFLElBQUksWUFBWSxHQUFHLElBQUksQ0FBQyxxQkFBcUIsQ0FBQyxPQUFPLENBQUMsR0FBRSxJQUFJLENBQUM7UUFDN0QsSUFBSSxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLGlCQUFpQixDQUFDLEdBQUcsRUFBRTtZQUMvQyxJQUFJLE9BQU8sTUFBTSxLQUFLLFdBQVcsRUFBRTtnQkFDbEMsT0FBTyxNQUFN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WSxXQUFXIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtQaXBlLCBQaXBlVHJhbnNmb3JtLCBOZ1pvbmUsIENoYW5nZURldGVjdG9yUmVmLCBPbkRlc3Ryb3l9IGZyb20gXCJAYW5ndWxhci9jb3JlXCI7XHJcbmltcG9ydCB7VHJhbnNsYXRlfSBmcm9tICcuL3RyYW5zbGF0ZSc7XHJcblxyXG5AUGlwZSh7XHJcblx0bmFtZTondGltZUFnbycsXHJcblx0cHVyZTpmYWxzZVxyXG59KVxyXG5leHBvcnQgY2xhc3MgVGltZUFnb1BpcGUgaW1wbGVtZW50cyBQaXBlVHJhbnNmb3JtLCBPbkRlc3Ryb3kge1xyXG5cdHByaXZhdGUgdGltZXI6IG51bWJlcjtcclxuXHRwcml2YXRlIHRyYW5zbGF0ZTogVHJhbnNsYXRlID0gbmV3IFRyYW5zbGF0ZSgpO1xyXG5cclxuXHRjb25zdHJ1Y3Rvcihwcml2YXRlIGNoYW5nZURldGVjdG9yUmVmOiBDaGFuZ2VEZXRlY3RvclJlZiwgcHJpdmF0ZSBuZ1pvbmU6IE5nWm9uZSkge31cclxuXHR0cmFuc2Zvcm0odmFsdWU6c3RyaW5nLCBsb2NhbGU/OiBzdHJpbmcpIHtcclxuXHRcdHRoaXMucmVtb3ZlVGltZXIoKTtcclxuXHRcdGxldCBkID0gbmV3IERhdGUodmFsdWUpO1xyXG5cdFx0bGV0IG5vdyA9IG5ldyBEYXRlKCk7XHJcblx0XHRsZXQgc2Vjb25kcyA9IE1hdGgucm91bmQoTWF0aC5hYnMoKG5vdy5nZXRUaW1lKCkgLSBkLmdldFRpbWUoKSkvMTAwMCkpO1xyXG5cdFx0bGV0IHRpbWVUb1VwZGF0ZSA9IHRoaXMuZ2V0U2Vjb25kc1VudGlsVXBkYXRlKHNlY29uZHMpICoxMDAwO1xyXG5cdFx0dGhpcy50aW1lciA9IHRoaXMubmdab25lLnJ1bk91dHNpZGVBbmd1bGFyKCgpID0+IHtcclxuXHRcdFx0aWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XHJcblx0XHRcdFx0cmV0dXJuIHdpbmRvdy5zZXRUaW1lb3V0KCgpID0+IHtcclxuXHRcdFx0XHRcdHRoaXMubmdab25lLnJ1bigoKSA9PiB0aGlzLmNoYW5nZURldGVjdG9yUmVmLm1hcmtGb3JDaGVjaygpKTtcclxuXHRcdFx0XHR9LCB0aW1lVG9VcGRhdGUpO1xyXG5cdFx0XHR9XHJcblx0XHRcdHJldHVybiBudWxsO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0cmV0dXJuIHRoaXMuZ2V0STE4bk1lc3NhZ2Uoc2Vjb25kcywgbG9jYWxlIHx8ICdlbicpO1xyXG5cdH1cclxuXHJcblx0Z2V0STE4bk1lc3NhZ2Uoc2Vjb25kczpudW1iZXIsIGxvY2FsZTogc3RyaW5nKSB7XHJcblx0XHRsZXQgbWludXRlcyA9IE1hdGgucm91bmQoTWF0aC5hYnMoc2Vjb25kcyAvIDYwKSk7XHJcblx0XHRsZXQgaG91cnMgPSBNYXRoLnJvdW5kKE1hdGguYWJzKG1pbnV0ZXMgLyA2MCkpO1xyXG5cdFx0bGV0IGRheXMgPSBNYXRoLnJvdW5kKE1hdGguYWJzKGhvdXJzIC8gMjQpKTtcclxuXHRcdGxldCBtb250aHMgPSBNYXRoLnJvdW5kKE1hdGguYWJzKGRheXMvMzAuNDE2KSk7XHJcblx0XHRsZXQgeWVhcnMgPSBNYXRoLnJvdW5kKE1hdGguYWJzKGRheXMvMzY1KSk7XHJcblxyXG5cclxuXHRcdGlmIChzZWNvbmRzIDw9IDQ1KSB7XHJcblx0XHRcdHJldHVybiB0aGlzLnRyYW5zbGF0ZS50cmFuc2xhdGUobG9jYWxlLCAnYSBmZXcgc2Vjb25kcyBhZ28nKTtcclxuXHRcdH0gZWxzZSBpZiAoc2Vjb25kcyA8PSA5MCkge1xyXG5cdFx0XHRyZXR1cm4gdGhpcy50cmFuc2xhdGUudHJhbnNsYXRlKGxvY2FsZSwgJ2EgbWludXRlIGFnbycpO1xyXG5cdFx0fSBlbHNlIGlmIChtaW51dGVzIDw9IDQ1KSB7XHJcblx0XHRcdHJldHVybiB0aGlzLnRyYW5zbGF0ZS50cmFuc2xhdGUobG9jYWxlLCAnbWludXRlcyBhZ28nLCB7IG1pbnV0ZXMgfSk7XHJcblx0XHR9IGVsc2UgaWYgKG1pbnV0ZXMgPD0gOTApIHtcclxuXHRcdFx0cmV0dXJuIHRoaXMudHJhbnNsYXRlLnRyYW5zbGF0ZShsb2NhbGUsICdhbiBob3VyIGFnbycpO1xyXG5cdFx0fSBlbHNlIGlmIChob3VycyA8PSAyMikge1xyXG5cdFx0XHRyZXR1cm4gdGhpcy50cmFuc2xhdGUudHJhbnNsYXRlKGxvY2FsZSwgJ2hvdXJzIGFnbycsIHsgaG91cnMgfSk7XHJcblx0XHR9IGVsc2UgaWYgKGhvdXJzIDw9IDM2KSB7XHJcblx0XHRcdHJldHVybiB0aGlzLnRyYW5zbGF0ZS50cmFuc2xhdGUobG9jYWxlLCAnYSBkYXkgYWdvJyk7XHJcblx0XHR9IGVsc2UgaWYgKGRheXMgPD0gMjUpIHtcclxuXHRcdFx0cmV0dXJuIHRoaXMudHJhbnNsYXRlLnRyYW5zbGF0ZShsb2NhbGUsICdkYXlzIGFnbycsIHsgZGF5cyB9KTtcclxuXHRcdH0gZWxzZSBpZiAoZGF5cyA8PSA0NSkge1xyXG5cdFx0XHRyZXR1cm4gdGhpcy50cmFuc2xhdGUudHJhbnNsYXRlKGxvY2FsZSwgJ2EgbW9udGggYWdvJyk7XHJcblx0XHR9IGVsc2UgaWYgKGRheXMgPD0gMzQ1KSB7XHJcblx0XHRcdHJldHVybiB0aGlzLnRyYW5zbGF0ZS50cmFuc2xhdGUobG9jYWxlLCAnbW9udGhzIGFnbycsIHsgbW9udGhzIH0pO1xyXG5cdFx0fSBlbHNlIGlmIChkYXlzIDw9IDU0NSkge1xyXG5cdFx0XHRyZXR1cm4gdGhpcy50cmFuc2xhdGUudHJhbnNsYXRlKGxvY2FsZSwgJ2EgeWVhciBhZ28nKTtcclxuXHRcdH0gZWxzZSB7IC8vIChkYXlzID4gNTQ1KVxyXG5cdFx0XHRyZXR1cm4gdGhpcy50cmFuc2xhdGUudHJhbnNsYXRlKGxvY2FsZSwgJ3llYXJzIGFnbycsIHsgeWVhcnMgfSk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRuZ09uRGVzdHJveSgpOiB2b2lkIHtcclxuXHRcdHRoaXMucmVtb3ZlVGltZXIoKTtcclxuXHR9XHJcblx0cHJpdmF0ZSByZW1vdmVUaW1lcigpIHtcclxuXHRcdGlmICh0aGlzLnRpbWVyKSB7XHJcblx0XHRcdHdpbmRvdy5jbGVhclRpbWVvdXQodGhpcy50aW1lcik7XHJcblx0XHRcdHRoaXMudGltZXIgPSBudWxsO1xyXG5cdFx0fVxyXG5cdH1cclxuXHRwcml2YXRlIGdldFNlY29uZHNVbnRpbFVwZGF0ZShzZWNvbmRzOm51bWJlcikge1xyXG5cdFx0bGV0IG1pbiA9IDYwO1xyXG5cdFx0bGV0IGhyID0gbWluICogNjA7XHJcblx0XHRsZXQgZGF5ID0gaHIgKiAyNDtcclxuXHRcdGlmIChzZWNvbmRzIDwgbWluKSB7IC8vIGxlc3MgdGhhbiAxIG1pbiwgdXBkYXRlIGV2ZXIgMiBzZWNzXHJcblx0XHRcdHJldHVybiAyO1xyXG5cdFx0fSBlbHNlIGlmIChzZWNvbmRzIDwgaHIpIHsgLy8gbGVzcyB0aGFuIGFuIGhvdXIsIHVwZGF0ZSBldmVyeSAzMCBzZWNzXHJcblx0XHRcdHJldHVybiAzMDtcclxuXHRcdH0gZWxzZSBpZiAoc2Vjb25kcyA8IGRheSkgeyAvLyBsZXNzIHRoZW4gYSBkYXksIHVwZGF0ZSBldmVyeSA1IG1pbnNcclxuXHRcdFx0cmV0dXJuIDMwMDtcclxuXHRcdH0gZWxzZSB7IC8vIHVwZGF0ZSBldmVyeSBob3VyXHJcblx0XHRcdHJldHVybiAzNjAwO1xyXG5cdFx0fVxyXG5cdH1cclxufVxyXG4iXX0=